<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Configuring directory sync with G Suite (Google) | bitwarden Help &amp; Support</title>

    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
          rel="stylesheet" />
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,300italic,400italic,600italic"
          rel="stylesheet" type="text/css">

    <link href="/css/styles.css?v=1495769573"
          rel="stylesheet" type="text/css">

    <link href="/lib/fluidbox/css/fluidbox.min.css?v=1495769573"
          rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
    <nav class="navbar navbar-inverse">
        <div class="container">
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#menu">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/" onclick="gaEvent('Nav Logo')">
                    <i class="fa fa-shield"></i>
                    <span class="visible-xs-inline"><strong>bit</strong>warden</span>
                </a>
            </div>
            <div class="collapse navbar-collapse" id="menu">
                <ul class="nav navbar-nav">
                    <li><a href="/">Help Center</a></li>
                    <li><a href="https://bitwarden.com/contact">Contact Us</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="https://bitwarden.com" onclick="gaEvent('Return')">
                            <i class="fa fa-share fa-flip-horizontal fa-fw"></i> Return to bitwarden.com
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <header>
        <div class="container">
            <form action="/search/" method="get">
                <div class="input-group input-group-lg">
                    <input type="search" class="form-control" placeholder="Search the help center..."
                           id="search-box" name="q">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="submit" onclick="gaEvent('Search')">
                            <i class="fa fa-search"></i>
                            <span class="sr-only">Search</span>
                        </button>
                    </span>
                </div>
            </form>
        </div>
    </header>

    <content>
        <div class="container">
    <h1 class="page-header">
        <i class="fa fa-file-text-o"></i>
        Configuring directory sync with G Suite (Google)
    </h1>
    <div class="breadcrumb">
        Category:
        
        <a href="/organizations">Organizations</a>
        
    </div>
    <div class="panel panel-default article">
        <div class="panel-body">
            <p>This article will cover how to connect the bitwarden Directory Connector tool to your G Suite directory.</p>

<h2 id="requirements">Requirements</h2>

<ul>
  <li>Read through the following article: <a href="/article/directory-sync/">Syncing users and groups with a directory</a></li>
  <li>Install bitwarden Directory Connector</li>
  <li>Using Directory Connector, log into your bitwarden account and select your enterprise organization</li>
</ul>

<h2 id="table-of-contents">Table of Contents</h2>

<ul>
  <li><a href="#create-a-google-cloud-project">Create a Google Cloud Project</a></li>
  <li><a href="#enable-the-admin-sdk-api-for-your-project">Enable the Admin SDK API for Your Project</a></li>
  <li><a href="#create--configure-a-service-account">Create &amp; Configure a Service Account</a></li>
  <li><a href="#configure-g-suite-security">Configure G Suite Security</a></li>
  <li><a href="#configure-directory-connector">Configure Directory Connector</a></li>
  <li><a href="#testing">Testing</a></li>
</ul>

<h2 id="create-a-google-cloud-project">Create a Google Cloud Project</h2>

<div class="callout callout-info">
            <h3><i class="fa fa-info-circle"></i> Note</h3>
            
<p>If you already have a Google Cloud project available, you can skip this step and re-use it here.</p>

        </div>

<ol>
  <li>Go to <a href="https://console.cloud.google.com">https://console.cloud.google.com</a></li>
  <li>Click <strong>Create Project</strong>
<a href="/images/directory-connector/gsuite/create-project.png" target="_blank" rel="lightbox">
         <img class="img-responsive img-thumbnail img-tag" src="/images/directory-connector/gsuite/create-project.png" />
     </a></li>
  <li>Enter a project name and click <strong>Create</strong>
<a href="/images/directory-connector/gsuite/new-project.png" target="_blank" rel="lightbox">
         <img class="img-responsive img-thumbnail img-tag" src="/images/directory-connector/gsuite/new-project.png" />
     </a></li>
  <li>Refresh the page and you should now see your project</li>
</ol>

<h2 id="enable-the-admin-sdk-api-for-your-project">Enable the Admin SDK API for Your Project</h2>

<ol>
  <li>Go to <a href="https://console.cloud.google.com">https://console.cloud.google.com</a></li>
  <li>Make sure the appropriate project is selected.</li>
  <li>Open the navigation menu and navigate to <strong>API Manager</strong> -&gt; <strong>Dashboard</strong>.</li>
  <li>Select the <strong>Enable API</strong> button near the top.
<a href="/images/directory-connector/gsuite/enable-api.png" target="_blank" rel="lightbox">
         <img class="img-responsive img-thumbnail img-tag" src="/images/directory-connector/gsuite/enable-api.png" />
     </a></li>
  <li>Click the <strong>Admin SDK</strong> link under the <strong>Google Apps APIs</strong> section.
<a href="/images/directory-connector/gsuite/admin-sdk.png" target="_blank" rel="lightbox">
         <img class="img-responsive img-thumbnail img-tag" src="/images/directory-connector/gsuite/admin-sdk.png" />
     </a></li>
  <li>Click the <strong>Enable</strong> button near the top.
<a href="/images/directory-connector/gsuite/admin-sdk-enable.png" target="_blank" rel="lightbox">
         <img class="img-responsive img-thumbnail img-tag" src="/images/directory-connector/gsuite/admin-sdk-enable.png" />
     </a></li>
</ol>

<h2 id="create--configure-a-service-account">Create &amp; Configure a Service Account</h2>

<ol>
  <li>Go to <a href="https://console.cloud.google.com">https://console.cloud.google.com</a></li>
  <li>Make sure the appropriate project is selected.</li>
  <li>Open the navigation menu and navigate to <strong>API Manager</strong> -&gt; <strong>Credentials</strong>.</li>
  <li>Click the <strong>Create credentials</strong> button and select <strong>Service account key</strong>.
<a href="/images/directory-connector/gsuite/create-credentials.png" target="_blank" rel="lightbox">
         <img class="img-responsive img-thumbnail img-tag" src="/images/directory-connector/gsuite/create-credentials.png" />
     </a></li>
  <li>Select <strong>New service account</strong>.</li>
  <li>Name the service account <strong>bitwarden Directory Connector</strong>. For the role, select <strong>Project</strong> and then <strong>Owner</strong>. Ensure that <strong>JSON</strong> is the selected <strong>Key type</strong>. Upon clicking <strong>Create</strong>, a JSON file will be downloaded; this is important for later so keep a note of where you have downloaded it.
<a href="/images/directory-connector/gsuite/create-service-account.png" target="_blank" rel="lightbox">
         <img class="img-responsive img-thumbnail img-tag" src="/images/directory-connector/gsuite/create-service-account.png" />
     </a></li>
  <li>You should now see your newly created service account listed. Click on <strong>Manage service accounts</strong> (on the right-hand side).
<a href="/images/directory-connector/gsuite/click-manage-service-accounts.png" target="_blank" rel="lightbox">
         <img class="img-responsive img-thumbnail img-tag" src="/images/directory-connector/gsuite/click-manage-service-accounts.png" />
     </a></li>
  <li>Select the options button next to your service account, and select <strong>Edit</strong>.
<a href="/images/directory-connector/gsuite/edit-service-account.png" target="_blank" rel="lightbox">
         <img class="img-responsive img-thumbnail img-tag" src="/images/directory-connector/gsuite/edit-service-account.png" />
     </a></li>
  <li>Check the box “Enable G Suite Domain-wide Delegation”, enter anything for “Product name for the consent screen” and click <strong>Save</strong>.
<a href="/images/directory-connector/gsuite/tick-gsuite.png" target="_blank" rel="lightbox">
         <img class="img-responsive img-thumbnail img-tag" src="/images/directory-connector/gsuite/tick-gsuite.png" />
     </a></li>
  <li>Click <strong>View Client ID</strong> and you’ll see the Client ID on screen. You will need the Client ID to configure security within G Suite. Highlight the Client ID and copy it to your clipboard.
   <a href="/images/directory-connector/gsuite/view-client-id.png" target="_blank" rel="lightbox">
        <img class="img-responsive img-thumbnail img-tag" src="/images/directory-connector/gsuite/view-client-id.png" />
    </a>
   <a href="/images/directory-connector/gsuite/copy-client-id.png" target="_blank" rel="lightbox">
        <img class="img-responsive img-thumbnail img-tag" src="/images/directory-connector/gsuite/copy-client-id.png" />
    </a></li>
</ol>

<h2 id="configure-g-suite-security">Configure G Suite Security</h2>

<ol>
  <li>Go to <a href="https://admin.google.com">https://admin.google.com</a></li>
  <li>Open the navigation menu and navigate to <strong>Security</strong>.</li>
  <li>Select the <strong>API reference</strong> option and make sure <strong>Enable API access</strong> is checked.
<a href="/images/directory-connector/gsuite/enable-api-access.png" target="_blank" rel="lightbox">
         <img class="img-responsive img-thumbnail img-tag" src="/images/directory-connector/gsuite/enable-api-access.png" />
     </a></li>
  <li>Back in the list of options, select <strong>Show more</strong> -&gt; <strong>Advanced settings</strong> -&gt; <strong>Manage API client access</strong>
<a href="/images/directory-connector/gsuite/manage-api-access.png" target="_blank" rel="lightbox">
         <img class="img-responsive img-thumbnail img-tag" src="/images/directory-connector/gsuite/manage-api-access.png" />
     </a></li>
  <li>For <strong>Client Name</strong>, paste the <strong>Client ID</strong> of the service account that you created in the previous steps. For <strong>API Scopes</strong>, paste the following values to grant read-only access to users and groups:
    <pre>https://www.googleapis.com/auth/admin.directory.user.readonly,https://www.googleapis.com/auth/admin.directory.group.readonly,https://www.googleapis.com/auth/admin.directory.group.member.readonly</pre>
  </li>
  <li>Click the <strong>Authorize</strong> button to save.
<a href="/images/directory-connector/gsuite/authorize-client.png" target="_blank" rel="lightbox">
         <img class="img-responsive img-thumbnail img-tag" src="/images/directory-connector/gsuite/authorize-client.png" />
     </a></li>
  <li>You should now see your service account listed as an authorized client of G Suite.
<a href="/images/directory-connector/gsuite/authorized-client-list.png" target="_blank" rel="lightbox">
         <img class="img-responsive img-thumbnail img-tag" src="/images/directory-connector/gsuite/authorized-client-list.png" />
     </a></li>
</ol>

<h2 id="configure-directory-connector">Configure Directory Connector</h2>

<ol>
  <li>Locate the secret key JSON file that was downloaded whenever you created your service account in the steps above.</li>
  <li>Copy this file to the bitwarden Directory Connector program data folder at <code class="highlighter-rouge">C:/ProgramData/bitwarden/Directory Connector</code>.
    <ul>
      <li>Optionally rename the JSON file to something that is easier to remember, such as <code class="highlighter-rouge">client_secret.json</code></li>
    </ul>
  </li>
  <li>Launch the Directory Connector console by double clicking the shortcut.</li>
  <li>Select option 3 (Configure directory connection) from the main menu.</li>
  <li>Select <strong>G Suite Directory</strong> as the type.</li>
  <li>Enter the name of the JSON file that you copied in step 2.</li>
  <li>Enter the domain of your G Suite account.</li>
  <li>Enter the email address of an admin user that has full access to the G Suite directory (such as your own).</li>
</ol>

<p>Congrats! You are done configuring G Suite with the bitwarden Directory Connector.</p>

<h2 id="testing">Testing</h2>

<p>Test your configurations by running a simulated directory sync. You should see your G Suite groups and/or users printed to the screen.</p>

        </div>
        
        
    </div>
    <div class="row article-blocks">
        <div class="col-sm-6">
            <div class="panel panel-default panel-rate">
                <div class="panel-heading">
                    <h3 class="panel-title"><i class="fa fa-thumbs-o-up"></i> Was this helpful?</h3>
                </div>
                <div class="panel-body">
                    <p>Rate this article:</p>
                    <div class="rw-ui-container"></div>
                </div>
            </div>
        </div>
        <div class="col-sm-6">
            <div class="panel panel-default panel-contact">
    <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-envelope-o"></i> Email Us</h3>
    </div>
    <div class="panel-body">
        <p>Want to talk to a human?</p>
        <a href="https://bitwarden.com/contact/" onclick="gaEvent('Talk To Human')">
            <i class="fa fa-long-arrow-right"></i>
            Send Us An Email
        </a>
    </div>
</div>
        </div>
    </div>
</div>

<script>
    (function (d, t, e, m) {
        // Async Rating-Widget initialization.
        window.RW_Async_Init = function () {
            RW.init({
                huid: "340409",
                uid: "1a448820f2de881574e56e07bffdd7e8",
                source: "website",
                options: {
                    "size": "medium",
                    "type": "nero",
                    "style": "thumbs",
                    "isDummy": false
                }
            });
            RW.render();
        };
        // Append Rating-Widget JavaScript library.
        var rw, s = d.getElementsByTagName(e)[0], id = "rw-js",
            l = d.location, ck = "Y" + t.getFullYear() +
                "M" + t.getMonth() + "D" + t.getDate(), p = l.protocol,
            f = ((l.search.indexOf("DBG=") > -1) ? "" : ".min"),
            a = ("https:" == p ? "secure." + m + "js/" : "js." + m);
        if (d.getElementById(id)) return;
        rw = d.createElement(e);
        rw.id = id; rw.async = true; rw.type = "text/javascript";
        rw.src = p + "//" + a + "external" + f + ".js?ck=" + ck;
        s.parentNode.insertBefore(rw, s);
    }(document, new Date(), "script", "rating-widget.com/"));
</script>

    </content>

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-sm-4 col-xs-6">
                    <h4>Links</h4>
                    <ul class="list-unstyled">
                        <li><a href="https://bitwarden.com">Home</a></li>
                        <li><a href="https://bitwarden.com/#download">Download</a></li>
                        <li><a href="https://bitwarden.com/#organizations">Business</a></li>
                        <li><a href="https://bitwarden.com/contact">Contact Us</a></li>
                        <li><a href="https://vault.bitwarden.com/#/" onclick="gaEvent('Footer Web Vault')">Web Vault</a></li>
                    </ul>
                </div>
                <div class="col-sm-4 col-xs-6">
                    <h4 class="invisible">&nbsp;</h4>
                    <ul class="list-unstyled">
                        <li><a href="https://blog.bitwarden.com" onclick="gaEvent('Footer Blog')">Blog</a></li>
                        <li><a href="/">Help/Support</a></li>
                        <li>
                            <a href="https://github.com/bitwarden" target="_blank" onclick="gaEvent('Footer Source Code')">
                                Source Code
                            </a>
                        </li>
                        <li><a href="https://bitwarden.com/privacy">Privacy Policy</a></li>
                        <li><a href="https://bitwarden.com/credits">Credits</a></li>
                    </ul>
                </div>
                <div class="col-sm-4 col-xs-12 social">
                    <h4>Follow Us</h4>
                    <ul class="list-inline">
                        <li>
                            <a href="https://twitter.com/bitwarden_app" title="Twitter" onclick="gaEvent('Follow Twitter')"
                               target="_blank">
                                <i class="fa fa-twitter"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.facebook.com/bitwarden/" title="Facebook" onclick="gaEvent('Follow Facebook')"
                               target="_blank">
                                <i class="fa fa-facebook-square"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://plus.google.com/114869903467947368993" title="Google+" target="_blank"
                               onclick="gaEvent('Follow Google+')">
                                <i class="fa fa-google-plus-square"></i>
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/bitwarden" title="GitHub" onclick="gaEvent('Follow GitHub')"
                               target="_blank">
                                <i class="fa fa-github"></i>
                            </a>
                        </li>
                    </ul>
                    &copy; 2015 - 2017, <br class="visible-sm" />8bit Solutions LLC
                </div>
            </div>
        </div>
    </footer>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script>(window.jQuery || document.write('<script src="lib\/jquery\/jquery.min.js?v=1495769573"><\/script>'));</script>

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script>((window.jQuery && window.jQuery.fn && window.jQuery.fn.modal) || document.write('<script src="lib\/bootstrap\/js\/bootstrap.min.js?v=1495769573"><\/script>'));</script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
    <script src="/lib/fluidbox/js/jquery.fluidbox.min.js"></script>

    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-81915606-10', 'auto');
        ga('send', 'pageview');

        function gaEvent(action) {
            ga('send', {
                hitType: 'event',
                eventCategory: 'main',
                eventAction: action
            });
        }

        $(function () {
            var lightboxOpen = false,
                lightboxSelector = 'a[rel="lightbox"]';

            $(lightboxSelector)
                .on('openstart.fluidbox', function () {
                    lightboxOpen = true;
                })
                .on('closestart.fluidbox', function () {
                    lightboxOpen = false;
                })
                .fluidbox();

            $(document).keydown(function (e) {
                if (lightboxOpen && e.keyCode === 27) {
                    $(lightboxSelector).trigger('close.fluidbox');
                }
            });

            $(window).scroll(function () {
                if (lightboxOpen) {
                    $(lightboxSelector).trigger('close.fluidbox');
                }
            });

            $('.article .panel-body > h2, .article .panel-body > h3').filter('[id]').each(function () {
                var header = $(this),
                    headerID = header.attr('id'),
                    anchorClass = 'header-link',
                    anchorIcon = '<i class="fa fa-link" aria-hidden="true"></i>';

                if (headerID) {
                    header.append($('<a />')
                        .addClass(anchorClass)
                        .attr({ 'href': '#' + headerID, 'aria-hidden': 'true', title: 'Permalink' })
                        .html(anchorIcon));
                }
                return this;
            });
        });
    </script>
</body>
</html>